# 諒のドラゴンクエスト2026

お子様の学習管理をRPG風にゲーミフィケーションした楽しい学習記録Webアプリケーションです。

## プロジェクト概要

- **名前**: 諒のドラゴンクエスト2026
- **目的**: 年間の学習進捗を楽しくRPG風に管理する
- **対象**: 小学生の学習記録とモチベーション向上

## 主な機能

### ✅ 実装済み機能

1. **単一日表示とナビゲーション機能**
   - **当日のみ**を1ページに大きく表示
   - **前の日/次の日ボタン**で日付を移動
   - **今日に戻るボタン**で素早く当日に戻れる
   - 1月1日〜12月31日の範囲内で自由に移動可能
   - 過去の学習記録も確認・編集可能
   
2. **8つの学習カテゴリー**
   - グノーブル国語（防御力アップ）
   - グノーブル算数（攻撃力アップ）
   - 基礎力完成テスト（力アップ）
   - 四谷大塚漢字（体力アップ）
   - その他国語（防御力アップ）
   - その他算数（攻撃力アップ）
   - その他（スーパークエスト）（全パラメーターアップ）
   - その他（自由記述）（ゴールド+10）

3. **RPG風パラメーター管理**
   - **防御力（国語）**: 初期値5、レベルシステム搭載
   - **攻撃力（算数）**: 初期値5、レベルシステム搭載
   - **力（基礎力）**: 初期値5、レベルシステム搭載
   - **体力（漢字）**: 初期値5、レベルシステム搭載
   - **ゴールド**: 自由記述でゲット
   - チェックするとランダムで1〜3上昇
   - 5ポイント上昇ごとにレベルアップ

4. **ボスモンスター出現システム**
   - **全レベルが一致した時のみボス出現**
   - レベル5, 10, 15...100まで5刻みで20体のボス
   - 全パラメーターのレベルを均等に上げることが重要
   - **ボス一覧**: 暗記スライム（Lv.5）から大魔王ジュケンデビル（Lv.100）まで

5. **メモ機能**
   - 各学習項目にメモを追加可能
   - 具体的な学習内容を記録

6. **ドラゴンクエスト風デザイン**
   - レトロゲーム風のUI
   - 青紫のグラデーション背景
   - ゴールドのボーダーとテキスト
   - パラメーターバーのビジュアル表示

## 技術スタック

- **フロントエンド**: HTML, CSS (TailwindCSS), JavaScript (Vanilla)
- **バックエンド**: Hono (TypeScript)
- **データベース**: Cloudflare D1 (SQLite)
- **デプロイ**: Cloudflare Pages
- **開発環境**: Vite + Wrangler

## API エンドポイント

### パラメーター取得
```
GET /api/parameters
```
レスポンス例:
```json
{
  "defense": 5,
  "attack": 5,
  "power": 5,
  "hp": 5,
  "gold": 0,
  "defenseLevel": 2,
  "attackLevel": 2,
  "powerLevel": 2,
  "hpLevel": 2,
  "currentBoss": null
}
```

### 学習記録追加
```
POST /api/records
```
リクエストボディ:
```json
{
  "year": 2026,
  "month": 1,
  "day": 20,
  "category": "グノーブル国語",
  "memo": "漢字テスト100点"
}
```

### 学習記録取得
```
GET /api/records?year=2026&month=1
```

### 学習記録削除
```
DELETE /api/records/:id
```

## データモデル

### learning_records テーブル
| カラム名 | 型 | 説明 |
|---------|-----|-----|
| id | INTEGER | 主キー |
| year | INTEGER | 年 |
| month | INTEGER | 月 |
| day | INTEGER | 日 |
| category | TEXT | 学習カテゴリー |
| memo | TEXT | メモ |
| created_at | DATETIME | 作成日時 |

### parameters テーブル
| カラム名 | 型 | 説明 |
|---------|-----|-----|
| id | INTEGER | 主キー |
| defense | INTEGER | 防御力（国語） |
| attack | INTEGER | 攻撃力（算数） |
| power | INTEGER | 力（基礎力） |
| hp | INTEGER | 体力（漢字） |
| gold | INTEGER | ゴールド |
| updated_at | DATETIME | 更新日時 |

## ローカル開発

### 初回セットアップ
```bash
# 依存関係インストール
npm install

# ローカルデータベースマイグレーション
npm run db:migrate:local

# ビルド
npm run build

# 開発サーバー起動
pm2 start ecosystem.config.cjs
```

### 開発コマンド
```bash
# ビルド
npm run build

# ローカル開発サーバー（PM2）
npm run dev:d1

# データベースリセット
npm run db:reset

# ポートクリーンアップ
npm run clean-port
```

## デプロイ

### Cloudflare Pages デプロイ手順

1. **Cloudflare D1データベース作成**
```bash
npx wrangler d1 create webapp-production
# 出力されたdatabase_idをwrangler.jsonc に設定
```

2. **本番データベースマイグレーション**
```bash
npm run db:migrate:prod
```

3. **Cloudflare Pagesプロジェクト作成**
```bash
npx wrangler pages project create webapp --production-branch main
```

4. **デプロイ実行**
```bash
npm run deploy:prod
```

## 使い方

1. **当日の学習を記録**
   - 画面に表示される当日の日付を確認
   - 学習項目にチェックを入れる
   - メモを追加（任意）

2. **他の日付を確認・編集**
   - **「前の日」ボタン**: 昨日やそれ以前の記録を確認
   - **「次の日」ボタン**: 明日以降の日付に移動
   - **「今日に戻る」ボタン**: いつでも当日に戻れる

3. **過去の記録を確認**
   - 前の日ボタンで過去に移動
   - 既にチェックした項目は無効化表示
   - メモの内容も確認可能

4. **パラメーターの成長を確認**
   - 上部のパラメーターバーで成長を確認
   - レベルアップとボス出現で学習意欲向上

## プロジェクト構成

```
webapp/
├── src/
│   └── index.tsx           # メインアプリケーション
├── migrations/
│   └── 0001_initial_schema.sql  # データベーススキーマ
├── public/
│   └── static/
│       └── style.css       # カスタムCSS
├── ecosystem.config.cjs    # PM2設定
├── wrangler.jsonc          # Cloudflare設定
├── package.json            # 依存関係とスクリプト
└── README.md               # このファイル
```

## デプロイステータス

- **プラットフォーム**: Cloudflare Pages
- **ステータス**: ✅ ローカル開発完了、本番デプロイ準備中
- **開発サーバーURL**: https://3000-i0h62zpec9ggr6e4gb5eb-5634da27.sandbox.novita.ai
- **本番URL**: （デプロイ後に追加）

## 🎮 ボスモンスター完全図鑑（全20体）

**ボス出現条件**: 全てのパラメーター（防御力、攻撃力、力、体力）のレベルが**完全一致**した時のみ出現！

| レベル | ボス名 | タイプ | 説明 |
|--------|--------|--------|------|
| 💚 Lv.5 | 暗記スライム | 初級 | 暗記の基礎を学ぶ最初の敵 |
| 🟢 Lv.10 | 計算ゴブリン | 初級 | 四則演算を操る小鬼 |
| 🟡 Lv.15 | 漢字オーク | 初級 | 漢字の読み書きを妨げる敵 |
| 🟡 Lv.20 | 文章トロール | 中級 | 文章問題を複雑にする巨人 |
| 🟠 Lv.25 | 暗記魔人ザンキング | 中級 | 暗記を嫌う中級魔物 |
| 🟠 Lv.30 | 計算魔王カルクロス | 中級 | 計算問題を乱す魔王 |
| 🔴 Lv.35 | 読解竜ドクカイザー | 上級 | 読解力を奪う竜 |
| 🔴 Lv.40 | 応用魔神オーヨード | 上級 | 応用問題の支配者 |
| 🔴 Lv.45 | 図形騎士ズケイト | 上級 | 図形問題の守護者 |
| 🟣 Lv.50 | 文法将軍ブンポウ | 上級 | 文法の鉄則を操る将軍 |
| 🟣 Lv.55 | 速算妖怪ソクサンマ | 超級 | 速算力を試す妖怪 |
| 🟣 Lv.60 | 記述魔導士キジュツ | 超級 | 記述問題の魔術師 |
| 🔵 Lv.65 | 論理魔神ロンリード | 超級 | 論理的思考を問う魔神 |
| 🔵 Lv.70 | 複合竜コンボドラ | 超級 | 複合問題を繰り出す竜 |
| 🔵 Lv.75 | 時間支配者タイムロード | 最上級 | 時間配分を狂わせる支配者 |
| ⚫ Lv.80 | 難問帝王ナンモンテイ | 最上級 | 難問を生み出す帝王 |
| ⚫ Lv.85 | 完璧騎士パーフェクト | 最上級 | 完璧な解答を求める騎士 |
| ⚫ Lv.90 | 試験神エグザム | 最上級 | 試験そのものを司る神 |
| ⭐ Lv.95 | 合格竜パスドラゴン | 伝説級 | 合格への最後の壁 |
| 👑 Lv.100 | 大魔王ジュケンデビル | 魔王級 | 受験を統べる最強の魔王 |

**攻略のコツ**:
- バランスよく全科目を学習すること
- 一つのパラメーターだけ上げてもボスは出現しない
- 全レベルが揃った瞬間にボスが出現し、盛大な演出で祝福される！

## 今後の推奨機能

### 未実装の機能候補

1. **データエクスポート機能**
   - 学習記録をCSVでダウンロード
   - 月次/年次レポート生成

2. **リマインダー機能**
   - 毎日の学習チェックリマインド

3. **実績システム**
   - 連続記録日数バッジ
   - 特別なトロフィー獲得

4. **保護者向けダッシュボード**
   - 学習進捗の可視化グラフ
   - 月次サマリー

5. **モバイル最適化**
   - プログレッシブWebアプリ（PWA）化
   - スマホ専用UI

## ライセンス

このプロジェクトは個人利用を目的としています。

---

**製作日**: 2026年1月20日  
**バージョン**: 1.0.0  
**製作者**: GenSpark AI Assistant
## 🎮 諒のドラゴンクエスト2026 - デプロイテスト
# D1 binding test
